# Authrozation

Previous exercises involved `mutations` and `queries` but we never worried about
any aspect of _authorization_.

`Apollo Client` operates on the notion of _links_. You can think of those links
as `middlewares` or `afterwares` that modify the request that you make.

You already used links, mainly while creating the `httpLink`.

```typescript
const httpLink = new HttpLink({ uri: "...." });
```

The `httpLink` is a middleware that actually sends our request.

## Exercise

Our API requires us to be _authorized_ to make any kind of requests.
See if you can make the the interface work by specifing `Authorization` header
on the `httpLink`.

## Extra Credit

### ðŸ’¯ Create a link to dinamically set `Authorization` header.

While assigning a static value to `Authorization` header during the creation of
`httpLink` might be a valid strategy,
it's often required to refresh this value once it has expired.

First step to do that is to create a link (an _afterware_) which sets the right
`Authorization` header value after the API returns 403 status code.

To do that, create a link using the `onError` function exported from
`@apollo/link-error`

### ðŸ’¯ Implement refresh token afterware

We already have a `onError` afterware created, but our `Authorization` header is still
a static value.

Let's swap it for real pair for _refresh_ and _access_ tokens which will be
fetched from an API.

Since the operation becomes `async`, you will need to use `fromPromise` API
exposed by `@apollo/client` package.
